# Теоретическое задание (прочитать, запустить, ознакомиться с кодом)

`doctest` — это модуль в стандартной библиотеке Python, который позволяет тестировать фрагменты документации, 
содержащие примеры кода. Основная цель `doctest` — обеспечить, чтобы примеры в документации оставались 
актуальными и работоспособными, выполняя их и проверяя результат. 

### Зачем нужен doctest?

* **Проверка корректности документации**: Убедиться, что примеры кода в документации действительно работают.
* **Автоматизация тестирования**: Облегчить процесс написания тестов, так как примеры кода можно выполнять и проверять автоматически.
* **Поддержка кода в актуальном состоянии**: Обеспечить, чтобы изменения в коде не ломали примеры в документации.

### Как применять doctest?

Использование doctest состоит из нескольких шагов:

* **Написание примеров в строках документации**: Примеры кода вставляются в строку документации функции, метода или класса.
* **Запуск doctest**: Примеры в документации автоматически извлекаются и выполняются модулем doctest.

> Важно! doctest проверяет именно корректность тестов, что опишите в документации модуля, функции, класса, метода. Поэтому
если тесты пройдены, то ошибок не будет. А если хотя бы один тест не пройден, то будет ошибка, с местом, где тест не пройден.

> Работает это таким образом, сначала пишется `>>>` после этого символа записывается код который выполняется, а ниже прописывается то, с чем нужно сравнить ответ,
если ответы совпадают, то всё хорошо, если нет, то напечатается ошибка.

### Примеры использования (просто для ознакомления)

#### *Пример 1: Простая функция*

Напишем функцию с примерами в строках документации:

```python
def add(a, b):
    """
    Возвращает сумму a и b.

    Пример:
    >>> add(2, 3)
    5
    >>> add(-1, 1)
    0
    >>> add(0, 0)
    0
    """
    return a + b

if __name__ == "__main__":
    import doctest
    doctest.testmod()
```

#### *Пример 2: Класс*

Если функция, метод и т.д. ничего `не возвращает`, то в строке ничего писать не нужно

```python
class Calculator:
    """
    Простейший калькулятор.

    Примеры:
    >>> calc = Calculator()  
    >>> calc.add(2, 3)
    5
    >>> calc.subtract(10, 5)
    5
    >>> calc.add_no_return(0, 1)  # Здесь ничего не возвращается
    """

    def add(self, a, b):
        return a + b

    def subtract(self, a, b):
        return a - b
    
    def add_no_return(self, a, b):
        a + b

if __name__ == "__main__":
    import doctest
    doctest.testmod()
```

#### *Пример 3: Проверка вызова ошибок*

doctest позволяет проверить вызов ошибки, для этого необходимо сначала записать `Traceback (most recent call last):`, а под ним саму ошибку

```python
def divide(a, b):
    """
    Делит a на b.

    Пример:
    >>> divide(6, 3)
    2.0
    >>> divide(5, 0)
    Traceback (most recent call last):
        ...
    ZeroDivisionError: division by zero
    >>> divide(10, 2)
    5.0
    """
    return a / b

if __name__ == "__main__":
    import doctest
    doctest.testmod()
```

#### *Пример 4: Игнорирование частей вывода*

Иногда бывает полезно пропустить некоторые части вывода, например, если они изменяются от запуска к запуску (например, адреса памяти). 
Для этого используется флаг `ELLIPSIS`:

```python
def foo():
    """
    Пример:
    >>> foo()
    Some output with ... in the middle
    """
    print("Some output with dynamic content in the middle")

    
if __name__ == "__main__":
    import doctest
    doctest.testmod(optionflags=doctest.ELLIPSIS)
```

#### *Пример 5: Игнорирование пробелов и разрывов строк*

Флаг `NORMALIZE_WHITESPACE` позволяет игнорировать различия в пробелах и разрывах строк между ожидаемым и фактическим выводом:

```python
def bar():
    """
    Пример:
    >>> bar()
    'text   with   irregular   spacing'
    """
    return 'text   with   irregular   spacing'

if __name__ == "__main__":
    import doctest
    doctest.testmod(optionflags=doctest.NORMALIZE_WHITESPACE)
```

#### *Пример 6: Пропуск тестов*

Для пропуска теста используется директива `# doctest: +SKIP`:

```python
def baz():
    """
    Пример:
    >>> baz() # doctest: +SKIP
    This test will be skipped
    """
    return "This test will be skipped"


if __name__ == "__main__":
    import doctest
    doctest.testmod()
```

#### *Пример 7: Запуск doctest из командной строки*

Для запуска doctest из командной строки можно использовать следующую команду:

```python
python -m doctest имя_файла.py
```

#### *Пример 8: Использование doctest в отдельном файле*

Иногда удобно писать тесты в отдельном файле. В таком случае можно использовать текстовый файл:

```python
# файл: example.txt
"""
>>> from mymodule import add
>>> add(2, 3)
5
>>> add(-1, 1)
0
>>> add(0, 0)
0
"""

if __name__ == "__main__":
    import doctest
    doctest.testfile("example.txt")
```

> В документации [doctest](https://docs.python.org/3/library/doctest.html) можно ознакомиться со всем функционалом. 